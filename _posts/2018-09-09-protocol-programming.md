---
layout: post
title: swift로 하는 protocol programming
tags: [swift, protocol, interface, ios, dependency, di]
---
swift의 POP(protocol oriented programming)의 글들을 보면, 프로토콜을 통해 수평적인 확장을 지향하지만,  
이번 글에서 다룰 프로토콜 프로그래밍은 전통적 인터페이스를 설계하고 사용하는 과정을 봅니다.  
앞으로는 프로토콜과 인터페이스를 동일한 의미로 작성합니다.  

### 프로토콜 프로그래밍이 중요한 이유
구현이 아닌 인터페이스에 맞추어 개발하라는 말이 있듯이 그만큼 인터페이스(프로토콜)은 중요합니다.  
  
의도한 행위만을 노출 시킴으로서 그외 상태에 대한 캡슐화가 이루어 집니다.  
`func getUser(id: Int) -> User` 을 갖는 프로토콜이 있다면, 이를 구현하는 구현체는 User를 네트워크에서 가저오든, 파일에서 가저오든 상관이 없고 이를 구현하기 위해 사용되는 변수 혹은 메서드들은 노출되지 않으며 노출시킬 필요가 없습니다.

구현체가 아닌 프로토콜에 의존적이면, 구현을 바꾸기가 쉬워집니다.  
위와 같이 User를 네트워크에서 가저오던 구현체를, 파일에서 가저오든 인터페이스만 충족된다면, 사용되는 곳에서는 신경쓰지 않습니다.  
혹은 더 좋은 성능으로 개발된 구현체를 만들어 기존 구현체를 대체할 수 있습니다.  

### 주의
프로토콜의 구현을 바꾸는건 쉬운 장점이 있지만,  
프로토콜 자체를 바꾸는 일은 모든 구현체, 해당 프로토콜을 이용하는 오브젝트, 테스트 코드에 영향을 주기 때문에 어려운 작업 입니다.  
따라서 프로토콜을 설계할때 적절한 권한(역할)을 부여해야 하여 변경을 최소화 해야합니다.  
  
### 예제
User의 id를 받아 User 객체를 돌려주는 프로토콜을 설계합니다.  

user 객체를 Network, Local, Network or Local에서 얻어오는 예제 추가  
의존성, DI 내용 함께


### 마무리
과도한 예측과 이를 기반으로 한 설계들은 불필요한 작업을 만들지만 현재의 요구사항만 만족하는 설계는 유연함이 사라집니다.  
예측을 통해 적절한 설계를 도입하는 것이 엔지니어의 실력이라 생각하며 해당 주제를 다루어 봤습니다.  
각 주제마다 책 한권이 나오는 방대한 내용이지만, 가볍게 다루어 봤습니다.  
틀린 부분이나 생각이 다른 부분을 공유해 주신다면 정말 감사합니다.
